
<table>
  <thead>
    <h3>商品新規登録</h3>
  </thead>
  <tbody>
    <th>
      <%= form_with model: @item, url: admin_items_path, local:true do |f| %>
       <div class="form-group">
         <%= f.label "商品画像" %>
         <%= f.file_field :item_image, class: "form-control-file item_image", accept: 'image/*' %>
       </div>
       <div class="form-group">
         <%= f.label :"商品名" %>
         <%= f.text_field :name, class: 'form-control item_name' %>
       </div>
        <div class="form-group">
         <%= f.label :"商品説明" %>
         <%= f.text_field :introduction, class: 'form-control item_introduction' %>
       </div>
        <div class="form-group">
         <%= f.label :"ジャンル" %>
         <%= f.select :genre_id, options_for_select([["新しくジャンルを作成する", +"new"]].concat(@genres.map { |genre| [genre.name, genre.id] })),
            { include_blank: "-- 選択してください --" }, {required: true, class: +"form-control", id: "genre-select" } %>
       </div>
       <div class="form-group">
         <%= f.label :"税抜価格" %>
         <%= f.text_field :price_excluding_tax, class: 'form-control item_price' %>"円"
       </div>
       <div class="form-group">
         <%= f.label :"販売ステータス" %>
         <%= f.radio_button :is_sales_status, 0 %>販売中,<%= f.radio_button :is_sales_status, 1  %>販売中止中
       </div>
       <div class="form-group">
        <%= f.submit "新規作成", class: 'btn btn-success' %>

       </div>
      <% end %>

    </th>
  
  </tbody>
</table>
<!--「新しくジャンルを作成する」の選択時に発火-->
<script>
 # HTMLドキュメントが読み込まれた後に実行される関数
  $(document).ready(function() {
    var genreSelect = $("#genre-select");
    var newGenreForm = $("#new-genre-form");

 # ジャンル選択の内容がチェンジされたときに実行する処理
    genreSelect.on("change", function() {
      if (genreSelect.val() === "new") {
        slideDown(newGenreForm);
      } else {
        slideUp(newGenreForm);
      }
    });

  # 引数で指定された要素をスライドダウンさせる処理
    function slideDown(element) {
      element.fadeIn(300);
    }
    
  # 引数で指定された要素をスライドアップさせる処理
    function slideUp(element) {
      element.fadeOut(300);
    }
  });
</script>